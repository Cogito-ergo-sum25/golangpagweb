{{template "base" .}}
{{define "content"}}
<div class="container mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/inventario">Catálogo</a></li>
            <li class="breadcrumb-item"><a href="/editar-producto/{{.Producto.IDProducto}}">Editar Producto</a></li>
            <li class="breadcrumb-item active">Inventario</li>
        </ol>
    </nav>

    <div class="card shadow-lg border-0">
        <div class="card-header azul text-white">
            <h5 class="mb-0"><i class="fas fa-boxes me-2"></i> Gestión de Inventario: {{.Producto.Nombre}}</h5>
            <small>SKU: {{.Producto.SKU}} | Marca: {{.Producto.Marca}}</small>
        </div>
        
        <form method="POST" action="/producto/inventario/{{.Producto.IDProducto}}" class="needs-validation" novalidate>
            <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
            
            <div class="card-body bg-light">
                <div class="row g-4">
                    <div class="col-md-12">
                        <h6 class="form-label fw-bold border-bottom pb-2">Unidades y Costeo</h6>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label fw-bold">Unidad Base</label>
                        <select class="form-select" name="unidad_base">
                            <option value="PIEZA" {{if eq .Producto.Inventario.UnidadBase "PIEZA"}}selected{{end}}>PIEZA</option>
                            <option value="HORA" {{if eq .Producto.Inventario.UnidadBase "HORA"}}selected{{end}}>HORA</option>
                            <option value="KILOGRAMO" {{if eq .Producto.Inventario.UnidadBase "KILOGRAMO"}}selected{{end}}>KILOGRAMO</option>
                            <option value="LITROS" {{if eq .Producto.Inventario.UnidadBase "LITROS"}}selected{{end}}>LITROS</option>
                            <option value="METRO" {{if eq .Producto.Inventario.UnidadBase "METRO"}}selected{{end}}>METRO</option>
                            <option value="METRO CUADRADO" {{if eq .Producto.Inventario.UnidadBase "METRO CUADRADO"}}selected{{end}}>METRO CUADRADO</option>
                            <option value="METRO CÚBICO" {{if eq .Producto.Inventario.UnidadBase "METRO CÚBICO"}}selected{{end}}>METRO CÚBICO</option>
                            <option value="SERVICIOS" {{if eq .Producto.Inventario.UnidadBase "SERVICIOS"}}selected{{end}}>SERVICIOS</option>
                            <option value="NO APLICA" {{if eq .Producto.Inventario.UnidadBase "NO APLICA"}}selected{{end}}>NO APLICA</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label fw-bold">Unidad de medida almacén</label>
                        <select class="form-select" name="unidad_medida_almacen">
                            <option value="PIEZAS" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "PIEZAS"}}selected{{end}}>PIEZAS</option>
                            <option value="BLOQUE" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "BLOQUE"}}selected{{end}}>BLOQUE</option>
                            <option value="BOLSA" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "BOLSA"}}selected{{end}}>BOLSA</option>
                            <option value="CAJA" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "CAJA"}}selected{{end}}>CAJA</option>
                            <option value="COMBO" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "COMBO"}}selected{{end}}>COMBO</option>
                            <option value="DOCENA" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "DOCENA"}}selected{{end}}>DOCENA</option>
                            <option value="KIT" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "KIT"}}selected{{end}}>KIT</option>
                            <option value="PAQUETE" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "PAQUETE"}}selected{{end}}>PAQUETE</option>
                            <option value="UNIDAD" {{if eq .Producto.Inventario.UnidadMedidaAlmacen "UNIDAD"}}selected{{end}}>UNIDAD</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Método de Costeo</label>
                        <select class="form-select" name="metodo_costeo">
                            <option value="COSTO PROMEDIO" {{if eq .Producto.Inventario.MetodoCosteo "COSTO PROMEDIO"}}selected{{end}}>COSTO PROMEDIO</option>
                            <option value="PEPS" {{if eq .Producto.Inventario.MetodoCosteo "PEPS"}}selected{{end}}>PEPS (Primeras entradas, primeras salidas)</option>
                        </select>
                    </div>

                    <div class="col-md-12 mt-5">
                        <h6 class="form-label fw-bold border-bottom pb-2">Dimensiones y Peso</h6>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Largo (cm)</label>
                        <input type="number" step="0.01" class="form-control" name="largo" value="{{.Producto.Inventario.Largo}}">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Ancho (cm)</label>
                        <input type="number" step="0.01" class="form-control" name="ancho" value="{{.Producto.Inventario.Ancho}}">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Alto (cm)</label>
                        <input type="number" step="0.01" class="form-control" name="alto" value="{{.Producto.Inventario.Alto}}">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Peso (g)</label>
                        <input type="number" step="0.01" class="form-control" name="peso" value="{{.Producto.Inventario.Peso}}">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Volumen (m³)</label>
                        <input type="number" step="0.0001" class="form-control" name="volumen" value="{{.Producto.Inventario.Volumen}}">
                    </div>

                    <div class="col-md-12 mt-5">
                        <h6 class="form-label fw-bold border-bottom pb-2">Políticas de Inventario y Control</h6>
                    </div>
                    
                    <div class="col-md-4 border-end">
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" name="maneja_serie" id="f1" {{if .Producto.Inventario.ManejaSerie}}checked{{end}}>
                            <label class="form-check-label" for="f1">Maneja número de serie</label>
                        </div>
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" name="maneja_lote" id="f2" {{if .Producto.Inventario.ManejaLote}}checked{{end}}>
                            <label class="form-check-label" for="f2">Maneja lote</label>
                        </div>
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" name="maneja_fecha_caducidad" id="f3" {{if .Producto.Inventario.ManejaFechaCaducidad}}checked{{end}}>
                            <label class="form-check-label" for="f3">Maneja fecha de caducidad</label>
                        </div>
                    </div>

                    <div class="col-md-4 border-end">
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" name="requiere_pesaje" id="f4" {{if .Producto.Inventario.RequierePesaje}}checked{{end}}>
                            <label class="form-check-label" for="f4">Requiere pesaje</label>
                        </div>
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" name="considerar_compra_programada" id="f5" {{if .Producto.Inventario.ConsiderarCompraProgramada}}checked{{end}}>
                            <label class="form-check-label" for="f5">Compra programada</label>
                        </div>
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" name="produccion_fabricacion" id="f6" {{if .Producto.Inventario.ProduccionFabricacion}}checked{{end}}>
                            <label class="form-check-label" for="f6">Producción / Fabricación</label>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" name="ventas_sin_existencia" id="f7" {{if .Producto.Inventario.VentasSinExistencia}}checked{{end}}>
                            <label class="form-check-label" for="f7">Ventas sin existencia</label>
                        </div>
                        <div class="form-check form-switch mb-3">
                            <input class="form-check-input" type="checkbox" name="lote_automatico" id="f8" {{if .Producto.Inventario.LoteAutomatico}}checked{{end}}>
                            <label class="form-check-label" for="f8">Lote automático (POS)</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-footer py-3 d-flex justify-content-between">
                <a href="/editar-producto/{{.Producto.IDProducto}}" class="btn azul px-4 shadow-sm text-white">
                    <i class="fas fa-arrow-left me-2"></i> Volver
                </a>
                <button type="submit" class="btn verde px-5 shadow-sm text-white">
                    <i class="fas fa-save me-2"></i> Guardar Inventario
                </button>
            </div>
        </form>
    </div>
</div>
{{end}}